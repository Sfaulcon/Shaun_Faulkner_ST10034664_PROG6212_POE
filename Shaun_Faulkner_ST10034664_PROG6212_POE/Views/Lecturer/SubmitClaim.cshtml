@{
    ViewData["Title"] = "Submit Claim";
}

<!DOCTYPE html>
<html>
    <head>
        <title>Submit Claim</title>
        <link rel="stylesheet" href="~/css/lecturer.css" />
    </head>
    <body>
        <h1 class="submit-claim-title">Submit Claim</h1>

        <!-- Form to submit new claim with corresponding details -->
    <form class="submit-claim-form" enctype="multipart/form-data" method="post" action="/Lecturer/SubmitClaim">
        <div class="form-group">
            <label for="HoursWorked">Hours Worked:</label>
            <input type="number" id="HoursWorked" name="HoursWorked" class="form-control" required />
        </div>
        <div class="form-group">
            <label for="HourlyRate">Hourly Rate:</label>
            <input type="number" id="HourlyRate" name="HourlyRate" class="form-control" required step="0.01" />
        </div>
        <div class="form-group">
            <label for="AdditionalNotes">Additional Notes:</label>
            <textarea id="AdditionalNotes" name="AdditionalNotes" class="form-control"></textarea>
        </div>
        <div class="form-group">
            <label for="SupportingDocuments">Supporting Documents:</label>
            <input type="file" id="SupportingDocuments" name="SupportingDocuments" class="form-control" accept=".pdf, .docx, .xlsx" />
            <button type="button" id="uploadButton" class="btn-upload">Upload</button>
            <div class="uploaded-file" id="uploadedFileName"></div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <button class="btn-submit-claim" type="submit">Submit Claim</button>
    </form>

        <!-- Button to return back to dashboard. -->
        <p class="back-to-dashboard"><a href="/Lecturer/Dashboard">Back to Dashboard</a></p>

    <script>

        document.getElementById('uploadButton').onclick = function () {
            const fileINput = document.getElementById('SupportingDocument');
            const fileName = fileInput.files[0] ? fileInput.files[0].name : '';
            const fileSize = fileInput.files[0] ? fileInput.files[0].size : 0;

            if (fileInput.files.length > 0) {
                const allowedTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];
                const fileType = fileInput.files[0].type;

                if (fileSize > 2 * 1024 * 1024) {
                    document.getElementById('errorMessage').innerText = 'File size exceeds 2MB';
                    fileInput.value = '';
                    document.getElementById('uploadFileName').innerText = '';
                } else if (!allowedTypes.includes(fileType)) {
                    document.getElementById('errorMessage').innerText = 'Invalid file type. Only .pdf, .docx and .xlsx are allowed.'
                    fileInput.value = '';
                    document.getElementById('uploadedFileName').innerText = '';
                } else {
                    document.getElementById('errorMessage').innerText = '';
                    document.getElementById('uploadedFileName').innerText = 'Uploaded file: ${fileName}';
                }
            }
        };

    </script>
</body>
</html>